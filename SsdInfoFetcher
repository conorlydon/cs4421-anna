import oshi.hardware.HWDiskStore;
import oshi.software.os.OSFileStore;
import oshi.hardware.HardwareAbstractionLayer;
import oshi.software.os.OperatingSystem;

public class SsdInfoFetcher {
    private HardwareAbstractionLayer hardware;
    private OperatingSystem os;

    // Constructor to initialize hardware and OS instances
    public SsdInfoFetcher(HardwareAbstractionLayer hardware, OperatingSystem os) {
        this.hardware = hardware;
        this.os = os;
    }

    // Method to fetch and return SSD information as a formatted string
    public String getSsdInfo() {
        StringBuilder ssdInfo = new StringBuilder();
        for (HWDiskStore disk : hardware.getDiskStores()) {
            long totalDiskSize = disk.getSize();

            // Assuming there is only one file store associated with the SSD
            for (OSFileStore fs : os.getFileSystem().getFileStores()) {
                ssdInfo.append(String.format(
                        "SSD Model: %s\nTotal Size: %s\nAvailable Space: %s\n\n",
                        disk.getModel(),
                        ByteFormatter.formatBytes(totalDiskSize),
                        ByteFormatter.formatBytes(fs.getUsableSpace())
                ));
            }
        }
        return ssdInfo.toString();
    }
}
